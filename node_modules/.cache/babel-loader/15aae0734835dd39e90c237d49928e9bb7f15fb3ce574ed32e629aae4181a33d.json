{"ast":null,"code":"import _objectSpread from\"/home/mohanned/Downloads/battleship/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";function reducer(state,action){var type=action.type,payload=action.payload;switch(type){case'SET_TIMELINE':{return _objectSpread(_objectSpread({},state),{},{timeline:payload});}case'SET_PLAYERS':{return _objectSpread(_objectSpread({},state),{},{players:payload});}case'SET_SHIPS':{var player=payload.player,ships=payload.ships;var newState=_objectSpread({},state);newState.players[player].ships=ships;return _objectSpread({},newState);}case'SET_SHIP_HITS':{var _player=payload.player,ship=payload.ship,hits=payload.hits;var _newState=_objectSpread({},state);_newState.players[_player].ships.find(function(item){return item.name===ship.name;}).hits=hits;return _objectSpread({},_newState);}case'SET_SHIP_ON_BOARD':{var locationArray=payload.locationArray,_player2=payload.player,_ship=payload.ship;var _newState2=_objectSpread({},state);var newBoard=_newState2.players[_player2].gameBoard.board.map(function(cell,index){if(locationArray.includes(index)){cell.hasShip=_ship.name;}return cell;});_newState2.players[_player2].gameBoard.board=newBoard;return _objectSpread({},_newState2);}case'SET_BOARD':{var _newState3=_objectSpread({},state);var _player3=payload.player,board=payload.board;_newState3.players[_player3].gameBoard.board=board;return _objectSpread({},_newState3);}case'SET_MESSAGE':{return _objectSpread(_objectSpread({},state),{},{message:payload});}case'RESET_MESSAGE':{return _objectSpread(_objectSpread({},state),{},{message:''});}case'FIRE_SHOT':{var _player4=payload.player,location=payload.location;var opponent=_player4==='human'?'computer':'player';var _newState4=_objectSpread({},state);_newState4.players[_player4].fireShot(location,_newState4.players[opponent].gameBoard);return _objectSpread({},_newState4);}case'SET_TURN':{var _newState5=_objectSpread({},state);_newState5.turn=payload;return _objectSpread({},_newState5);}case'SET_WINNER':{var _newState6=_objectSpread({},state);_newState6.winner=payload;return _objectSpread({},_newState6);}case'RESET_GAME':{var initialState={timeline:'init',players:[],turn:0,message:'',winner:''};return _objectSpread({},initialState);}// for testing\ncase'CHEAT_CODE':{var _newState7=_objectSpread({},state);_newState7.players.computer.ships.forEach(function(ship){return ship.hits=ship.position;});return _objectSpread({},_newState7);}default:return state;}}export default reducer;","map":{"version":3,"names":["reducer","state","action","type","payload","timeline","players","player","ships","newState","ship","hits","find","item","name","locationArray","newBoard","gameBoard","board","map","cell","index","includes","hasShip","message","location","opponent","fireShot","turn","winner","initialState","computer","forEach","position"],"sources":["/home/mohanned/Downloads/battleship/src/reducer.js"],"sourcesContent":["function reducer(state, action) {\n\tconst { type, payload } = action;\n\tswitch (type) {\n\t\tcase 'SET_TIMELINE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttimeline: payload,\n\t\t\t};\n\t\t}\n\t\tcase 'SET_PLAYERS': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tplayers: payload,\n\t\t\t};\n\t\t}\n\t\tcase 'SET_SHIPS': {\n\t\t\tconst { player, ships } = payload;\n\t\t\tconst newState = { ...state };\n\t\t\tnewState.players[player].ships = ships;\n\t\t\treturn { ...newState };\n\t\t}\n\t\tcase 'SET_SHIP_HITS': {\n\t\t\tconst { player, ship, hits } = payload;\n\t\t\tconst newState = { ...state };\n\t\t\tnewState.players[player].ships.find(\n\t\t\t\t(item) => item.name === ship.name\n\t\t\t).hits = hits;\n\t\t\treturn { ...newState };\n\t\t}\n\t\tcase 'SET_SHIP_ON_BOARD': {\n\t\t\tconst { locationArray, player, ship } = payload;\n\t\t\tconst newState = { ...state };\n\t\t\tconst newBoard = newState.players[player].gameBoard.board.map(\n\t\t\t\t(cell, index) => {\n\t\t\t\t\tif (locationArray.includes(index)) {\n\t\t\t\t\t\tcell.hasShip = ship.name;\n\t\t\t\t\t}\n\t\t\t\t\treturn cell;\n\t\t\t\t}\n\t\t\t);\n\t\t\tnewState.players[player].gameBoard.board = newBoard;\n\t\t\treturn { ...newState };\n\t\t}\n\t\tcase 'SET_BOARD': {\n\t\t\tconst newState = { ...state };\n\t\t\tconst { player, board } = payload;\n\t\t\tnewState.players[player].gameBoard.board = board;\n\t\t\treturn { ...newState };\n\t\t}\n\t\tcase 'SET_MESSAGE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tmessage: payload,\n\t\t\t};\n\t\t}\n\t\tcase 'RESET_MESSAGE': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tmessage: '',\n\t\t\t};\n\t\t}\n\t\tcase 'FIRE_SHOT': {\n\t\t\tconst { player, location } = payload;\n\t\t\tconst opponent = player === 'human' ? 'computer' : 'player';\n\t\t\tconst newState = { ...state };\n\t\t\tnewState.players[player].fireShot(\n\t\t\t\tlocation,\n\t\t\t\tnewState.players[opponent].gameBoard\n\t\t\t);\n\t\t\treturn { ...newState };\n\t\t}\n\t\tcase 'SET_TURN': {\n\t\t\tconst newState = { ...state };\n\t\t\tnewState.turn = payload;\n\t\t\treturn { ...newState };\n\t\t}\n\t\tcase 'SET_WINNER': {\n\t\t\tconst newState = { ...state };\n\t\t\tnewState.winner = payload;\n\t\t\treturn {\n\t\t\t\t...newState,\n\t\t\t};\n\t\t}\n\t\tcase 'RESET_GAME': {\n\t\t\tconst initialState = {\n\t\t\t\ttimeline: 'init',\n\t\t\t\tplayers: [],\n\t\t\t\tturn: 0,\n\t\t\t\tmessage: '',\n\t\t\t\twinner: '',\n\t\t\t};\n\t\t\treturn {\n\t\t\t\t...initialState,\n\t\t\t};\n\t\t}\n\t\t// for testing\n\t\tcase 'CHEAT_CODE': {\n\t\t\tconst newState = { ...state };\n\t\t\tnewState.players.computer.ships.forEach(\n\t\t\t\t(ship) => (ship.hits = ship.position)\n\t\t\t);\n\t\t\treturn { ...newState };\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\nexport default reducer;\n"],"mappings":"wHAAA,QAASA,QAAO,CAACC,KAAK,CAAEC,MAAM,CAAE,CAC/B,GAAQC,KAAI,CAAcD,MAAM,CAAxBC,IAAI,CAAEC,OAAO,CAAKF,MAAM,CAAlBE,OAAO,CACrB,OAAQD,IAAI,EACX,IAAK,cAAc,CAAE,CACpB,sCACIF,KAAK,MACRI,QAAQ,CAAED,OAAO,GAEnB,CACA,IAAK,aAAa,CAAE,CACnB,sCACIH,KAAK,MACRK,OAAO,CAAEF,OAAO,GAElB,CACA,IAAK,WAAW,CAAE,CACjB,GAAQG,OAAM,CAAYH,OAAO,CAAzBG,MAAM,CAAEC,KAAK,CAAKJ,OAAO,CAAjBI,KAAK,CACrB,GAAMC,SAAQ,kBAAQR,KAAK,CAAE,CAC7BQ,QAAQ,CAACH,OAAO,CAACC,MAAM,CAAC,CAACC,KAAK,CAAGA,KAAK,CACtC,wBAAYC,QAAQ,EACrB,CACA,IAAK,eAAe,CAAE,CACrB,GAAQF,QAAM,CAAiBH,OAAO,CAA9BG,MAAM,CAAEG,IAAI,CAAWN,OAAO,CAAtBM,IAAI,CAAEC,IAAI,CAAKP,OAAO,CAAhBO,IAAI,CAC1B,GAAMF,UAAQ,kBAAQR,KAAK,CAAE,CAC7BQ,SAAQ,CAACH,OAAO,CAACC,OAAM,CAAC,CAACC,KAAK,CAACI,IAAI,CAClC,SAACC,IAAI,QAAKA,KAAI,CAACC,IAAI,GAAKJ,IAAI,CAACI,IAAI,GACjC,CAACH,IAAI,CAAGA,IAAI,CACb,wBAAYF,SAAQ,EACrB,CACA,IAAK,mBAAmB,CAAE,CACzB,GAAQM,cAAa,CAAmBX,OAAO,CAAvCW,aAAa,CAAER,QAAM,CAAWH,OAAO,CAAxBG,MAAM,CAAEG,KAAI,CAAKN,OAAO,CAAhBM,IAAI,CACnC,GAAMD,WAAQ,kBAAQR,KAAK,CAAE,CAC7B,GAAMe,SAAQ,CAAGP,UAAQ,CAACH,OAAO,CAACC,QAAM,CAAC,CAACU,SAAS,CAACC,KAAK,CAACC,GAAG,CAC5D,SAACC,IAAI,CAAEC,KAAK,CAAK,CAChB,GAAIN,aAAa,CAACO,QAAQ,CAACD,KAAK,CAAC,CAAE,CAClCD,IAAI,CAACG,OAAO,CAAGb,KAAI,CAACI,IAAI,CACzB,CACA,MAAOM,KAAI,CACZ,CAAC,CACD,CACDX,UAAQ,CAACH,OAAO,CAACC,QAAM,CAAC,CAACU,SAAS,CAACC,KAAK,CAAGF,QAAQ,CACnD,wBAAYP,UAAQ,EACrB,CACA,IAAK,WAAW,CAAE,CACjB,GAAMA,WAAQ,kBAAQR,KAAK,CAAE,CAC7B,GAAQM,SAAM,CAAYH,OAAO,CAAzBG,MAAM,CAAEW,KAAK,CAAKd,OAAO,CAAjBc,KAAK,CACrBT,UAAQ,CAACH,OAAO,CAACC,QAAM,CAAC,CAACU,SAAS,CAACC,KAAK,CAAGA,KAAK,CAChD,wBAAYT,UAAQ,EACrB,CACA,IAAK,aAAa,CAAE,CACnB,sCACIR,KAAK,MACRuB,OAAO,CAAEpB,OAAO,GAElB,CACA,IAAK,eAAe,CAAE,CACrB,sCACIH,KAAK,MACRuB,OAAO,CAAE,EAAE,GAEb,CACA,IAAK,WAAW,CAAE,CACjB,GAAQjB,SAAM,CAAeH,OAAO,CAA5BG,MAAM,CAAEkB,QAAQ,CAAKrB,OAAO,CAApBqB,QAAQ,CACxB,GAAMC,SAAQ,CAAGnB,QAAM,GAAK,OAAO,CAAG,UAAU,CAAG,QAAQ,CAC3D,GAAME,WAAQ,kBAAQR,KAAK,CAAE,CAC7BQ,UAAQ,CAACH,OAAO,CAACC,QAAM,CAAC,CAACoB,QAAQ,CAChCF,QAAQ,CACRhB,UAAQ,CAACH,OAAO,CAACoB,QAAQ,CAAC,CAACT,SAAS,CACpC,CACD,wBAAYR,UAAQ,EACrB,CACA,IAAK,UAAU,CAAE,CAChB,GAAMA,WAAQ,kBAAQR,KAAK,CAAE,CAC7BQ,UAAQ,CAACmB,IAAI,CAAGxB,OAAO,CACvB,wBAAYK,UAAQ,EACrB,CACA,IAAK,YAAY,CAAE,CAClB,GAAMA,WAAQ,kBAAQR,KAAK,CAAE,CAC7BQ,UAAQ,CAACoB,MAAM,CAAGzB,OAAO,CACzB,wBACIK,UAAQ,EAEb,CACA,IAAK,YAAY,CAAE,CAClB,GAAMqB,aAAY,CAAG,CACpBzB,QAAQ,CAAE,MAAM,CAChBC,OAAO,CAAE,EAAE,CACXsB,IAAI,CAAE,CAAC,CACPJ,OAAO,CAAE,EAAE,CACXK,MAAM,CAAE,EACT,CAAC,CACD,wBACIC,YAAY,EAEjB,CACA;AACA,IAAK,YAAY,CAAE,CAClB,GAAMrB,WAAQ,kBAAQR,KAAK,CAAE,CAC7BQ,UAAQ,CAACH,OAAO,CAACyB,QAAQ,CAACvB,KAAK,CAACwB,OAAO,CACtC,SAACtB,IAAI,QAAMA,KAAI,CAACC,IAAI,CAAGD,IAAI,CAACuB,QAAQ,EAAC,CACrC,CACD,wBAAYxB,UAAQ,EACrB,CACA,QACC,MAAOR,MAAK,CAAC,CAEhB,CAEA,cAAeD,QAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}