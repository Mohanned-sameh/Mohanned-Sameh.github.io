{"ast":null,"code":"import _slicedToArray from\"/home/mohanned/Downloads/battleship/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect}from'react';import{store}from'../../GameController';import{GameStartContainer,HudWindow,LabelContainer}from'../styled_components/gameControllerStyles';import EnemyWatersGrid from'./EnemyWatersGrid';import FriendlyWatersGrid from'./FriendlyWatersGrid';import checkWinner from'../../game_helpers/checkWinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function GameStart(_ref){var setDismount=_ref.setDismount,playBgSound=_ref.playBgSound,playSound=_ref.playSound;var _useContext=useContext(store),state=_useContext.state,dispatch=_useContext.dispatch;var message=state.message;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),hudMessage=_useState2[0],setHudMessage=_useState2[1];useEffect(function(){if(checkWinner(state.players)){setTimeout(function(){dispatch({type:'SET_WINNER',payload:checkWinner(state.players).name});},2500);}});useEffect(function(){// set dismount animation check in case of another playthrough\nsetDismount(false);},[setDismount]);useEffect(function(){// trigger type effect for messages if state changes\nif(message)handleHudSet(message);},[message]);useEffect(function(){dispatch({type:'SET_MESSAGE',payload:\"Awaiting orders, Admiral \".concat(state.players.human.name)});},[dispatch,state.players.human.name]);useEffect(function(){playBgSound('bgSound',0.7);},[playBgSound]);var handleHudSet=function handleHudSet(message){setHudMessage('');var messageArray=message.split('');var counter=0;var messageDisplay=[];var typingMessageEmulator=setInterval(function(){messageDisplay.push(messageArray[counter]);setHudMessage(messageDisplay.join(''));counter++;if(counter>=messageArray.length)clearInterval(typingMessageEmulator);},30);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(GameStartContainer,{children:[/*#__PURE__*/_jsx(HudWindow,{children:/*#__PURE__*/_jsx(\"p\",{style:{margin:'auto'},children:hudMessage})}),/*#__PURE__*/_jsx(LabelContainer,{row:\"4\",children:/*#__PURE__*/_jsx(\"h1\",{style:{margin:'auto auto 0'},children:\"Friendly waters\"})}),/*#__PURE__*/_jsx(LabelContainer,{row:\"2\",children:/*#__PURE__*/_jsx(\"h1\",{style:{margin:'auto auto 0'},children:\"Enemy waters\"})}),/*#__PURE__*/_jsx(FriendlyWatersGrid,{}),/*#__PURE__*/_jsx(EnemyWatersGrid,{playSound:playSound})]})});}export default GameStart;","map":{"version":3,"names":["React","useContext","useState","useEffect","store","GameStartContainer","HudWindow","LabelContainer","EnemyWatersGrid","FriendlyWatersGrid","checkWinner","GameStart","setDismount","playBgSound","playSound","state","dispatch","message","hudMessage","setHudMessage","players","setTimeout","type","payload","name","handleHudSet","human","messageArray","split","counter","messageDisplay","typingMessageEmulator","setInterval","push","join","length","clearInterval","margin"],"sources":["/home/mohanned/Downloads/battleship/src/components/game_window/GameStart.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport { store } from '../../GameController';\nimport {\n\tGameStartContainer,\n\tHudWindow,\n\tLabelContainer,\n} from '../styled_components/gameControllerStyles';\nimport EnemyWatersGrid from './EnemyWatersGrid';\nimport FriendlyWatersGrid from './FriendlyWatersGrid';\nimport checkWinner from '../../game_helpers/checkWinner';\n\nfunction GameStart({ setDismount, playBgSound, playSound }) {\n\tconst { state, dispatch } = useContext(store);\n\tconst { message } = state;\n\tconst [hudMessage, setHudMessage] = useState('');\n\n\tuseEffect(() => {\n\t\tif (checkWinner(state.players)) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'SET_WINNER',\n\t\t\t\t\tpayload: checkWinner(state.players).name,\n\t\t\t\t});\n\t\t\t}, 2500);\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\t// set dismount animation check in case of another playthrough\n\t\tsetDismount(false);\n\t}, [setDismount]);\n\n\tuseEffect(() => {\n\t\t// trigger type effect for messages if state changes\n\t\tif (message) handleHudSet(message);\n\t}, [message]);\n\n\tuseEffect(() => {\n\t\tdispatch({\n\t\t\ttype: 'SET_MESSAGE',\n\t\t\tpayload: `Awaiting orders, Admiral ${state.players.human.name}`,\n\t\t});\n\t}, [dispatch, state.players.human.name]);\n\n\tuseEffect(() => {\n\t\tplayBgSound('bgSound', 0.7);\n\t}, [playBgSound]);\n\n\tconst handleHudSet = (message) => {\n\t\tsetHudMessage('');\n\t\tconst messageArray = message.split('');\n\t\tlet counter = 0;\n\t\tconst messageDisplay = [];\n\t\tconst typingMessageEmulator = setInterval(() => {\n\t\t\tmessageDisplay.push(messageArray[counter]);\n\t\t\tsetHudMessage(messageDisplay.join(''));\n\t\t\tcounter++;\n\t\t\tif (counter >= messageArray.length) clearInterval(typingMessageEmulator);\n\t\t}, 30);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<GameStartContainer>\n\t\t\t\t<HudWindow>\n\t\t\t\t\t<p style={{ margin: 'auto' }}>{hudMessage}</p>\n\t\t\t\t</HudWindow>\n\t\t\t\t<LabelContainer row='4'>\n\t\t\t\t\t<h1 style={{ margin: 'auto auto 0' }}>Friendly waters</h1>\n\t\t\t\t</LabelContainer>\n\t\t\t\t<LabelContainer row='2'>\n\t\t\t\t\t<h1 style={{ margin: 'auto auto 0' }}>Enemy waters</h1>\n\t\t\t\t</LabelContainer>\n\t\t\t\t<FriendlyWatersGrid />\n\t\t\t\t<EnemyWatersGrid playSound={playSound} />\n\t\t\t</GameStartContainer>\n\t\t</>\n\t);\n}\n\nexport default GameStart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}